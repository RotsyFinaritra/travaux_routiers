## Server
server.port=${SERVER_PORT:8080}

## Datasource
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:h2:mem:travauxdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:sa}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER_CLASS_NAME:org.h2.Driver}

## JPA
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.database-platform=${SPRING_JPA_DATABASE_PLATFORM:org.hibernate.dialect.H2Dialect}

## H2
spring.h2.console.enabled=${ENABLE_H2_CONSOLE:true}

## Actuator
management.endpoints.web.exposure.include=${MANAGEMENT_ENDPOINTS_INCLUDE:health,info}
management.endpoint.health.show-details=${MANAGEMENT_HEALTH_SHOW_DETAILS:when_authorized}

## Logging
logging.file.path=${LOGS_PATH:./logs}

## Jackson
spring.jackson.serialization.WRITE_DATES_AS_TIMESTAMPS=false
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER_CLASS_NAME:org.h2.Driver}

# Toggle applicatif (lit USE_FIREBASE si défini)
app.use-firebase=${USE_FIREBASE:false}

# Profil par défaut (déjà possible via SPRING_PROFILES_ACTIVE)
spring.profiles.active=${SPRING_PROFILES_ACTIVE:local}

# Security
# Session lifetime for local mode (JWT expiry)
app.security.session-ttl-minutes=${APP_SECURITY_SESSION_TTL_MINUTES:60}
# Max failed login attempts before blocking an account (local mode)
app.security.max-login-attempts=${APP_SECURITY_MAX_LOGIN_ATTEMPTS:3}
# Secret used to sign local JWT tokens (CHANGE IN PROD)
app.security.jwt-secret=${APP_SECURITY_JWT_SECRET:dev-secret-change-me}